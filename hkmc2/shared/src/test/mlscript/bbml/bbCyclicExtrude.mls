:bbml



let f = (x => (x : [A] -> A -> A)) in f
//│ Type: (⊤ -> ⊥) ->{⊥} forall α1_2: (α1_2) ->{⊥} α1_2

let f = ((x => x) : [A] -> A -> A) in f
//│ Type: forall α3_2: (α3_2) ->{⊥} α3_2

let foo = f => (x => f(x(x)) : [A] -> A -> A) in foo
//│ Type: (α11_1 -> (⊤ -> ⊥)) ->{⊥} (α6_1 -> α11_1) ->{⊥} forall α7_2: (α7_2) ->{⊥} α7_2
//│ Where:
//│   α6_1 <: α6_1 -> α11_1

f => (let g = x => x(x) in f(g(g))) : [A] -> A -> A
//│ Type: (⊥ -> (⊤ -> ⊥)) ->{⊥} forall α19_2: (α19_2) ->{⊥} α19_2

:e
f => (let g = x => f(x(x)) in g) : [A] -> A -> A
//│ ╔══[ERROR] Type error in reference with expected type (<α>31_2) ->{⊥} <α>31_2
//│ ║  l.20: 	f => (let g = x => f(x(x)) in g) : [A] -> A -> A
//│ ║        	                              ^
//│ ╟── because: cannot constrain  α32_2 ->{α35_2 ∨ α33_2} α36_2  <:  <α>31_2 -> <α>31_2
//│ ╟── because: cannot constrain  <α>31_2  <:  D( α32_2 )
//│ ╟── because: cannot constrain  <α>31_2  <:  α32_2
//│ ╙── because: cannot constrain  <α>31_2  <:  ¬(~{α32_2 ->{α33_2} α34_2})
//│ Type: (⊥ -> ⊥) ->{⊥} forall α30_2: (α30_2) ->{⊥} α30_2

f => (x => f(x(x)) : [A] -> A -> A)
//│ Type: (α46_1 -> (⊤ -> ⊥)) ->{⊥} (α41_1 -> α46_1) ->{⊥} forall α42_2: (α42_2) ->{⊥} α42_2
//│ Where:
//│   α41_1 <: α41_1 -> α46_1

let foo = f => (f(x => x(x)) : [A] -> A -> A) in foo
//│ Type: (((α61_1 ->{α64_1} α63_1) ->{α64_1} α63_1) -> (⊤ -> ⊥)) ->{⊥} forall α54_2: (α54_2) ->{⊥} α54_2
//│ Where:
//│   α61_1 <: α61_1 ->{α64_1} α63_1

:todo
let foo(f) = (f(x => x(x)) : [A] -> A -> A) in foo
//│ Type: ⊤

:todo
fun foo(f) = (f(x => x(x)) : [A] -> A -> A)
//│ ╔══[ERROR] Expected a monomorphic type or an instantiable type here, but (α86_2) ->{⊥} forall α87_3: (α87_3) ->{⊥} α87_3 found
//│ ║  l.45: 	fun foo(f) = (f(x => x(x)) : [A] -> A -> A)
//│ ╙──      	        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
//│ Type: ⊤


f => (let g = x => x(x) in let tmp = g(g) in f(g)) : [A] -> A -> A
//│ Type: ((((α110_1 ∨ (α110_1 ->{α113_1} α112_1)) -> α112_1) ->{α113_1} α112_1) -> (⊤ -> ⊥)) ->{⊥} forall α103_2: (α103_2) ->{⊥} α103_2
//│ Where:
//│   α110_1 <: (α110_1 ∨ (α110_1 ->{α113_1} α112_1)) -> α112_1


